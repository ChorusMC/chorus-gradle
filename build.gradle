plugins {
    id 'java'
    id 'groovy'
    id 'maven'

    id 'idea'
    id 'eclipse'
}

sourceCompatibility = 1.8
targetCompatibility = 1.8

apply from: 'https://github.com/FabricMC/fabric-docs/raw/master/gradle/maven.gradle'
apply from: 'https://github.com/FabricMC/fabric-docs/raw/master/gradle/license.gradle'

group = 'net.fabricmc'
archivesBaseName = project.name.toLowerCase()
version = '0.0.7-SNAPSHOT'

repositories {
    mavenCentral()
    maven {
        name = 'fabric'
        url = 'http://maven.fabricmc.net/'
    }
	maven {
		name "RX14 Repository"
		url 'http://mvn.rx14.co.uk/local/'
	}
	maven {
		name = 'Mojang'
		url = 'https://libraries.minecraft.net/'
	}
}

configurations {
    deployerJars
    shade
    compile.extendsFrom shade
}

dependencies {
    compile gradleApi()

	shade 'org.zeroturnaround:zt-zip:1.11'
	shade 'org.slf4j:slf4j-api:1.7.25'
	shade 'org.slf4j:slf4j-simple:1.7.25'
	shade 'com.google.code.gson:gson:2.8.1'
	shade 'commons-io:commons-io:2.5'
	shade 'com.google.guava:guava:22.0'
	shade 'net.fabricmc:weave:0.1.0.+'
	shade 'cuchaz:enigma:0.11.0.+:lib'
	shade 'net.fabricmc:tiny-remapper:+'


	//Always fun when your dep needs the tool to build, but the tool needs the dep.
	//compile 'net.fabricmc:fabric-base:16w38a-0.0.4-SNAPSHOT'

	shade 'org.apache.commons:commons-lang3:3.6'

}

sourceSets {
    main.compileClasspath += configurations.shade;
    main.runtimeClasspath += configurations.shade;
    test.compileClasspath += configurations.shade;
    test.runtimeClasspath += configurations.shade;
}

jar {
	from {
		configurations.shade.each { dep ->
			from(project.zipTree(dep)){
				exclude 'META-INF', 'META-INF/**'
			}
		}
	}
}


task wrapper(type: Wrapper) {
    gradleVersion = '3.1'
}
